(this["webpackJsonpadex-staking-ui"]=this["webpackJsonpadex-staking-ui"]||[]).push([[0],{117:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},182:function(e,t,n){e.exports=n.p+"static/media/adex-staking.bf64bad2.svg"},199:function(e,t,n){e.exports=n(325)},204:function(e,t,n){},206:function(e,t){},214:function(e,t){},216:function(e,t){},248:function(e,t){},325:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),i=n.n(o),l=(n(204),n(17)),s=n.n(l),u=n(43),c=n(33),p=n(389),d=n(186),m=n(395),y=n(180),b=n.n(y),f=n(178),w=n.n(f),v=n(179),x=n.n(v),g=n(181),h=n.n(g),E={primary:{main:"#1B75BC",contrastText:"#fff"},accentOne:{main:"#57467B",contrastText:"#fff"},accentTwo:{main:"#7CB4B8",contrastText:"#fff"},grey:{main:"#3f3e3e",contrastText:"#fff"},error:w.a,warning:x.a,first:b.a,contrastThreshold:3,tonalOffset:.2,text:h.a},T=Object(d.a)({typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:13},palette:Object(u.a)({},E),overrides:{MuiButton:{root:{borderRadius:0},outlined:{borderRadius:0}},MuiTableCell:{head:{whiteSpace:"nowrap"},root:{whiteSpace:"nowrap"}},MuiPaper:{rounded:{borderRadius:0}},MuiTooltip:{tooltip:{borderRadius:0}}}}),k=Object(m.a)(T,{options:["xs","sm","md","lg","xl"],factor:3}),B=n(390),O=n(391),A=n(373),C=n(377),j=n(386),I=n(388),S=n(384),D=n(385),U=n(387),M=n(383),L=n(396),P=n(393),R=n(398),q=n(397),X=n(376),N=n(327),_=n(326),F=n(392),W=n(185),J=n.n(W),Y=n(190),H=n(187),V=n(379),z=n(382),Z=n(381),$=n(380),G=n(372),K=n(394),Q=n(378),ee=n(189),te=n(182),ne=n.n(te),ae=n(51),re=n(44),oe=n(183),ie=n(92),le=n(117),se="0x4470bb87d77b963a013db939be332f927f2b992e",ue="0x46ad2d37ceaee1e82b70b867e674b903a4b4ca32",ce=1e4,pe=3e4,de=Object(ae.getDefaultProvider)(),me=new ae.Contract(ue,ie,de),ye=new ae.Contract(se,le,de),be="https://min-api.cryptocompare.com/data/price?fsym=ADX&tsyms=BTC,USD,EUR",fe=30,we=[{label:"Validator Tom",id:Object(re.id)("validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d"),selectable:!0},{label:"Validator Jerry",id:Object(re.id)("validator:0xce07CbB7e054514D590a0262C93070D838bFBA2e"),selectable:!1}],ve=Object(re.bigNumberify)(0),xe={poolId:"",amount:ve},ge={loaded:!1,userBonds:[],userBalance:ve,totalStake:ve};function he(e){var t=e.title,n=e.subtitle,a=e.extra,o=e.loaded;return r.a.createElement(H.a,{elevation:3,style:{margin:k.spacing(1)}},r.a.createElement("div",{style:{padding:k.spacing(2),minHeight:"75px"}},r.a.createElement(ee.a,{variant:"h5"},n),a?r.a.createElement(ee.a,{color:"primary",variant:"h6"},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(ee.a,{color:"textSecondary",variant:"subtitle2"},t)),o?r.a.createElement(r.a.Fragment,null):r.a.createElement(G.a,null))}function Ee(e){var t=e.stats,n=e.onRequestUnbond,o=e.onUnbond,i=t.userBonds.filter((function(e){return"Active"===e.status})).map((function(e){return e.amount})).reduce((function(e,t){return e.add(t)}),ve),l=Object(a.useState)({}),s=Object(c.a)(l,2),u=s[0],p=s[1];Object(a.useEffect)((function(){fetch(be).then((function(e){return e.json()})).then(p).catch(console.error)}),[]);var d=function(e){if(!e)return null;if(!u.USD)return null;var t=e.toNumber(10)/ce*u.USD;return"".concat(t.toFixed(2)," USD")},m={fontWeight:"bold"};return r.a.createElement(A.a,{container:!0,style:{padding:k.spacing(4),maxWidth:"1200px",margin:"auto"}},r.a.createElement(A.a,{item:!0,xs:3},he({loaded:t.loaded,title:"Total ADX staked",extra:d(t.totalStake),subtitle:Te(t.totalStake)+" ADX"})),r.a.createElement(A.a,{item:!0,xs:3},he({loaded:t.loaded,title:"Your total active stake",extra:d(i),subtitle:Te(i)+" ADX"})),r.a.createElement(A.a,{item:!0,xs:3},he({loaded:t.loaded,title:"Your balance",subtitle:t.userBalance?Te(t.userBalance)+" ADX":"",extra:d(t.userBalance)})),r.a.createElement(A.a,{item:!0,xs:3},he({loaded:t.loaded,title:"Your total reward",extra:"0.00 USD",subtitle:"0.00 DAI"})),r.a.createElement(D.a,{xs:12},r.a.createElement(j.a,{"aria-label":"Bonds table",style:{marginTop:k.spacing(2)}},r.a.createElement(U.a,null,r.a.createElement(M.a,null,r.a.createElement(S.a,{style:m},"Bond amount"),r.a.createElement(S.a,{style:m,align:"right"},"Reward to collect"),r.a.createElement(S.a,{style:m,align:"right"},"Pool"),r.a.createElement(S.a,{style:m,align:"right"},"Status"),r.a.createElement(S.a,{style:m,align:"right"},"Actions"))),r.a.createElement(I.a,null,(t.userBonds||[]).map((function(e){var t=we.find((function(t){return t.id===e.poolId})),a=t?t.label:e.poolId;return r.a.createElement(M.a,{key:ke(e)},r.a.createElement(S.a,null,Te(e.amount)," ADX"),r.a.createElement(S.a,{align:"right"},"0.00 DAI"),r.a.createElement(S.a,{align:"right"},a),r.a.createElement(S.a,{align:"right"},function(e){if("UnbondRequested"===e.status){var t=e.willUnlock.getTime(),n=Date.now();if(t>n){var a=Math.ceil((t-n)/864e5);return"Can unbond in ".concat(a," days")}return"Can unbond"}return e.status}(e)),r.a.createElement(S.a,{align:"right"},"Active"===e.status?r.a.createElement(C.a,{color:"primary",onClick:function(){return n(e)}},"Request Unbond"):r.a.createElement(C.a,{disabled:e.willUnlock.getTime()>Date.now(),onClick:function(){return o(e)},color:"secondary"},"Unbond")))}))))))}function Te(e){return(e.toNumber(10)/ce).toFixed(2)}function ke(e){var t=e.owner,n=e.amount,a=e.poolId,r=e.nonce;return Object(re.keccak256)(re.defaultAbiCoder.encode(["address","address","uint","bytes32","uint"],[ue,t,n,a,r]))}function Be(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof window.ethereum){n.next=3;break}return n.next=3,s.a.awrap(window.ethereum.enable());case 3:if(window.web3){n.next=5;break}return n.abrupt("return",null);case 5:return e=new oe.Web3Provider(window.web3.currentProvider),t=e.getSigner(),n.abrupt("return",t);case 8:case"end":return n.stop()}}))}function Oe(){var e,t,n,a,r,o,i;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,s.a.awrap(Be());case 2:if(e=l.sent){l.next=5;break}return l.abrupt("return",{loaded:!0,userBonds:[],userBalance:ve});case 5:return l.next=7,s.a.awrap(e.getAddress());case 7:return t=l.sent,l.next=10,s.a.awrap(Promise.all([ye.balanceOf(t),de.getLogs({fromBlock:0,address:ue,topics:[null,Object(re.hexZeroPad)(t,32)]})]));case 10:return n=l.sent,a=Object(c.a)(n,2),r=a[0],o=a[1],i=o.reduce((function(e,t){var n=t.topics[0],a=me.interface.events;if(n===a.LogBond.topic){var r=me.interface.parseLog(t).values,o={owner:r.owner,amount:r.amount,poolId:r.poolId,nonce:r.nonce};e.push(Object(u.a)({id:ke(o),status:"Active"},o))}else if(n===a.LogUnbondRequested.topic){var i=me.interface.parseLog(t).values,l=i.bondId,s=i.willUnlock,c=e.find((function(e){return e.id===l}));c.status="UnbondRequested",c.willUnlock=new Date(1e3*s)}else if(n===a.LogUnbonded.topic){var p=me.interface.parseLog(t).values.bondId;e.find((function(e){return e.id===p})).status="Unbonded"}return e}),[]),l.abrupt("return",{loaded:!0,userBonds:i,userBalance:r});case 16:case"end":return l.stop()}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],i=r.a.useState(null),l=Object(c.a)(i,2),d=l[0],m=l[1],y=Object(a.useState)(ge),b=Object(c.a)(y,2),f=b[0],w=b[1],v=function(){return function(){var e,t,n,a;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(Promise.all([ye.balanceOf(ue),Oe()]));case 2:return e=r.sent,t=Object(c.a)(e,2),n=t[0],a=t[1],r.abrupt("return",Object(u.a)({totalStake:n},a));case 7:case"end":return r.stop()}}))}().then(w).catch((function(e){return console.error("loadStats",e)}))};Object(a.useEffect)((function(){v();var e=setInterval(v,pe);return function(){return clearInterval(e)}}),[]);var x=function(e){return function(t){var n,a,r,o,i,l,u;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.amount,a=t.poolId,r=t.nonce,c.next=3,s.a.awrap(Be());case 3:if(o=c.sent){c.next=6;break}return c.abrupt("return");case 6:return i=new ae.Contract(ue,ie,o),l=e?i.unbond.bind(i):i.requestUnbond.bind(i),c.next=10,s.a.awrap(l([n,a,r||ve]));case 10:return u=c.sent,c.next=13,s.a.awrap(u.wait());case 13:case"end":return c.stop()}}))}},g=x(!1),h=x(!0);return r.a.createElement(p.a,{theme:k},r.a.createElement(B.a,{position:"static"},r.a.createElement(O.a,null,r.a.createElement("img",{height:"40vh",src:ne.a,alt:"logo"}),r.a.createElement(F.a,{disabled:!f.loaded,onClick:function(){return o(!0)},variant:"extended",color:"secondary",style:{position:"absolute",right:"5%",top:"50%"}},r.a.createElement(J.a,{style:{margin:k.spacing(1)}}),"Stake your ADX"))),Ee({stats:f,onRequestUnbond:m,onUnbond:h}),function(e){var t=e.toUnbond,n=e.onDeny,a=e.onConfirm;return r.a.createElement(V.a,{open:!!t,onClose:n},r.a.createElement($.a,{id:"alert-dialog-title"},"Are you sure?"),r.a.createElement(Z.a,null,"Are you sure you want to request unbonding of"," ",Te(t?t.amount:ve)," ADX?",r.a.createElement("br",null),r.a.createElement("br",null),"Please be aware:",r.a.createElement("ol",null,r.a.createElement("li",null,"It will take ",fe," days before you will be able to withdraw your ADX!"),r.a.createElement("li",null,"You will not receive staking rewards for this amount in this period."))),r.a.createElement(z.a,null,r.a.createElement(C.a,{onClick:n,autoFocus:!0,color:"primary"},"Cancel"),r.a.createElement(C.a,{onClick:a,color:"primary"},"Unbond")))}({toUnbond:d,onDeny:function(){return m(null)},onConfirm:function(){d&&g(d),m(null)}}),r.a.createElement(N.a,{open:n,onClose:function(){return o(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center"},closeAfterTransition:!0,BackdropComponent:_.a,BackdropProps:{timeout:300}},r.a.createElement(Y.a,{in:n},function(e){var t=e.maxAmount,n=e.onNewBond,o=e.pools,i=Object(a.useState)(xe),l=Object(c.a)(i,2),s=l[0],p=l[1],d=Object(a.useState)(!1),m=Object(c.a)(d,2),y=m[0],b=m[1],f={minWidth:"180px"};return r.a.createElement(H.a,{elevation:2,style:{width:"500px",padding:k.spacing(2,4,3)}},r.a.createElement("h2",null,"Create a bond"),r.a.createElement(A.a,{container:!0,spacing:2},r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement(L.a,{required:!0,label:"ADX amount",type:"number",style:f,value:s.amount.toNumber()/ce,onChange:function(e){return p(Object(u.a)({},s,{amount:(n=t,a=Object(re.bigNumberify)(Math.abs(Math.floor(e.target.value*ce))),n.lt(a)?n:a)}));var n,a}}),r.a.createElement(ee.a,{variant:"subtitle2"},"Max amount:",r.a.createElement(C.a,{onClick:function(e){return p(Object(u.a)({},s,{amount:t}))}},Te(t)," ADX"))),r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement(X.a,{required:!0},r.a.createElement(q.a,null,"Pool"),r.a.createElement(P.a,{style:f,value:s.poolId,onChange:function(e){return p(Object(u.a)({},s,{poolId:e.target.value}))}},r.a.createElement(R.a,{value:""},r.a.createElement("em",null,"None")),o.map((function(e){var t=e.label,n=e.id;return r.a.createElement(R.a,{key:n,value:n},t)}))))),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(Q.a,{style:{userSelect:"none"},label:"I understand I am locking up my ADX for at least ".concat(fe," days and I am familiar with the staking terms."),control:r.a.createElement(K.a,{checked:y,onChange:function(e){return b(e.target.checked)}})})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(X.a,{style:{display:"flex"}},r.a.createElement(C.a,{disabled:!(s.poolId&&y&&s.amount.gt(ve)),color:"primary",variant:"contained",onClick:function(){return n(s)}},"Stake ADX")))))}({pools:we.filter((function(e){return e.selectable})),maxAmount:f.userBalance,onNewBond:function(e){o(!1),function(e,t){var n,a,r,o,i,l,u,c;s.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(n=t.amount,a=t.poolId,r=t.nonce,a){p.next=3;break}return p.abrupt("return");case 3:if(e.userBalance){p.next=5;break}return p.abrupt("return");case 5:if(!n.gt(e.userBalance)){p.next=7;break}return p.abrupt("return");case 7:return p.next=9,s.a.awrap(Be());case 9:if(o=p.sent){p.next=12;break}return p.abrupt("return");case 12:return i=new ae.Contract(ue,ie,o),l=new ae.Contract(se,le,o),p.t0=s.a,p.t1=l,p.next=18,s.a.awrap(o.getAddress());case 18:return p.t2=p.sent,p.t3=ue,p.t4=p.t1.allowance.call(p.t1,p.t2,p.t3),p.next=23,p.t0.awrap.call(p.t0,p.t4);case 23:if(u=p.sent,c=[],u.eq(n)){p.next=37;break}if(!u.gt(ve)){p.next=32;break}return p.t5=c,p.next=30,s.a.awrap(l.approve(ue,ve,{gasLimit:8e4}));case 30:p.t6=p.sent,p.t5.push.call(p.t5,p.t6);case 32:return p.t7=c,p.next=35,s.a.awrap(l.approve(ue,n,{gasLimit:8e4}));case 35:p.t8=p.sent,p.t7.push.call(p.t7,p.t8);case 37:return p.t9=c,p.next=40,s.a.awrap(i.addBond([n,a,r||ve],{gasLimit:11e4}));case 40:return p.t10=p.sent,p.t9.push.call(p.t9,p.t10),p.next=44,s.a.awrap(Promise.all(c.map((function(e){return e.wait()}))));case 44:case"end":return p.stop()}}))}(f,e)}}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"slasher","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"poolId","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"nonce","type":"uint256"},{"indexed":false,"internalType":"uint64","name":"slashedAtStart","type":"uint64"}],"name":"LogBond","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"poolId","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"newSlashPts","type":"uint256"}],"name":"LogSlash","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"bytes32","name":"bondId","type":"bytes32"},{"indexed":false,"internalType":"uint64","name":"willUnlock","type":"uint64"}],"name":"LogUnbondRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"bytes32","name":"bondId","type":"bytes32"}],"name":"LogUnbonded","type":"event"},{"constant":false,"inputs":[{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct BondLibrary.Bond","name":"bond","type":"tuple"}],"name":"addBond","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"bonds","outputs":[{"internalType":"bool","name":"active","type":"bool"},{"internalType":"uint64","name":"slashedAtStart","type":"uint64"},{"internalType":"uint64","name":"willUnlock","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct BondLibrary.Bond","name":"bond","type":"tuple"}],"name":"getWithdrawAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct BondLibrary.Bond","name":"bond","type":"tuple"}],"name":"requestUnbond","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"uint256","name":"pts","type":"uint256"}],"name":"slash","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"slashPoints","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"slasherAddr","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenAddr","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"}],"internalType":"struct BondLibrary.Bond","name":"bond","type":"tuple"}],"name":"unbond","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]')}},[[199,1,2]]]);
//# sourceMappingURL=main.d09f92b3.chunk.js.map