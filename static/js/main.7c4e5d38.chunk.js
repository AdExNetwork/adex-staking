(this["webpackJsonpadex-staking-ui"]=this["webpackJsonpadex-staking-ui"]||[]).push([[0],{108:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},220:function(e,t,a){e.exports=a.p+"static/media/adex-staking.bf64bad2.svg"},244:function(e,t,a){e.exports=a(399)},249:function(e,t,a){},255:function(e,t){},263:function(e,t){},265:function(e,t){},296:function(e,t){},30:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(135),r=a(20),f=a(227),o=a(7);function c(t){var a=function(e){var t=e.slice(2).toLowerCase();return"0x608060405234801561001057600080fd5b5060026000803073ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff160217905550600260008073".concat(t,"73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908360ff1602179055506000734470bb87d77b963a013db939be332f927f2b992e9050600073ade00c28244d5ce17d72e40330b1c318cd12b7c3905060008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016101429190610501565b60206040518083038186803b15801561015a57600080fd5b505afa15801561016e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610192919061045a565b90506000811115610276578273ffffffffffffffffffffffffffffffffffffffff1663095ea7b383836040518363ffffffff1660e01b81526004016101d892919061051c565b600060405180830381600087803b1580156101f257600080fd5b505af1158015610206573d6000803e3d6000fd5b505050508173ffffffffffffffffffffffffffffffffffffffff166394b918de826040518263ffffffff1660e01b81526004016102439190610560565b600060405180830381600087803b15801561025d57600080fd5b505af1158015610271573d6000803e3d6000fd5b505050505b60008273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016102b19190610501565b60206040518083038186803b1580156102c957600080fd5b505afa1580156102dd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610301919061045a565b9050600081111561043c576000734846c6837ec670bbd1f5b485471c8f64ecb9c53490508373ffffffffffffffffffffffffffffffffffffffff1663095ea7b382846040518363ffffffff1660e01b815260040161036092919061051c565b600060405180830381600087803b15801561037a57600080fd5b505af115801561038e573d6000803e3d6000fd5b505050508073ffffffffffffffffffffffffffffffffffffffff1663b4dca72460405180606001604052808581526020017f2ce0c96383fb229d9776f33846e983a956a7d95844fac57b180ed0071d93bb2860001b8152602001428152506040518263ffffffff1660e01b81526004016104089190610545565b600060405180830381600087803b15801561042257600080fd5b505af1158015610436573d6000803e3d6000fd5b50505050505b505050506105d8565b600081519050610454816105c1565b92915050565b60006020828403121561046c57600080fd5b600061047a84828501610445565b91505092915050565b61048c8161057b565b82525050565b61049b8161058d565b82525050565b6060820160008201516104b760008501826104e3565b5060208201516104ca6020850182610492565b5060408201516104dd60408501826104e3565b50505050565b6104ec816105b7565b82525050565b6104fb816105b7565b82525050565b60006020820190506105166000830184610483565b92915050565b60006040820190506105316000830185610483565b61053e60208301846104f2565b9392505050565b600060608201905061055a60008301846104a1565b92915050565b600060208201905061057560008301846104f2565b92915050565b600061058682610597565b9050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6105ca816105b7565b81146105d557600080fd5b50565b6101b7806105e76000396000f3fe608060405234801561001057600080fd5b506004361061002f5760003560e01c8063c066a5b11461007357610030565b5b60007396e3cb4b4632ed45363ff2c9f0fbec9b583d9d3a90503660008037600080366000846127105a03f43d6000803e806000811461006e573d6000f35b3d6000fd5b61008d600480360381019061008891906100d8565b6100a3565b60405161009a9190610110565b60405180910390f35b60006020528060005260406000206000915054906101000a900460ff1681565b6000813590506100d28161016a565b92915050565b6000602082840312156100ea57600080fd5b60006100f8848285016100c3565b91505092915050565b61010a8161015d565b82525050565b60006020820190506101256000830184610101565b92915050565b60006101368261013d565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060ff82169050919050565b6101738161012b565b811461017e57600080fd5b5056fea26469706673582212200e40aa3025d54e828fb973089b64ce06688fedcd71b98ae68521a0217652c59564736f6c634300060c0033")}(t);return{bytecode:a,addr:Object(r.getAddress)("0x".concat(Object(n.generateAddress2)(o.b,e.alloc(32),a).toString("hex")))}}function l(e,t,a,n){return new f.Transaction({identityContract:e,nonce:t.toString(10),feeTokenAddr:"0x6b175474e89094c44da98b954eedeac495271d0f",feeAmount:0,to:a,data:n})}}).call(this,a(8).Buffer)},351:function(e,t){},353:function(e,t){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),f=a(17),o=a.n(f),c=(a(249),a(38)),l=a(10),i=a.n(l),s=a(22),u=a(459),d=a(229),b=a(468),m=a(216),p=a.n(m),w=a(214),g=a.n(w),y=a(215),h=a.n(y),v=a(217),x=a.n(v),E={primary:{main:"#1B75BC",contrastText:"#fff"},accentOne:{main:"#57467B",contrastText:"#fff"},accentTwo:{main:"#7CB4B8",contrastText:"#fff"},grey:{main:"#3f3e3e",contrastText:"#fff"},error:g.a,warning:h.a,first:p.a,contrastThreshold:3,tonalOffset:.2,text:x.a},k=Object(d.a)({typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14},palette:Object(c.a)({},E),overrides:{MuiButton:{root:{borderRadius:0},outlined:{borderRadius:0}},MuiTableCell:{head:{whiteSpace:"nowrap"},root:{whiteSpace:"nowrap"}},MuiPaper:{rounded:{borderRadius:0}},MuiTooltip:{tooltip:{borderRadius:0,fontSize:"0.9em",backgroundColor:"rgba(0,0,0, 0.69)"},arrow:{color:"rgba(0,0,0, 0.69)"}}}}),O=Object(b.a)(k,{options:["xs","sm","md","lg","xl"],factor:3}),j=a(460),A=a(461),C=a(401),S=a(400),D=a(462),B=a(228),T=a.n(B),P=a(234),U=a(469),I=a(465),N=a(436),X=a(231),F=a(219),M=a.n(F),R=a(441),L=a(470),_=a(220),q=a.n(_),Y=a(28),W=a(20),z=a(221),V=a(222),J=a.n(V),H=a(223),G=a(136),Z=a(106),$=a(137),K=a(108),Q=a(230),ee=a(444),te=a(445),ae=a(471),ne=a(443),re=a(446),fe=a(464),oe=a(447),ce=a(448),le=a(449),ie=a(450),se=a(233),ue=a(442),de=a(138);function be(e){var t=e.title,a=e.subtitle,n=e.extra,f=e.loaded,o=e.actions,c="string"===typeof n?r.a.createElement(de.a,{color:"primary",variant:"h6"},n):n||r.a.createElement(r.a.Fragment,null);return r.a.createElement(se.a,{elevation:3,style:{height:"100%"}},r.a.createElement("div",{style:{padding:O.spacing(2),minHeight:"85px"}},r.a.createElement(de.a,{variant:a.length>16?"h6":"h5"},a),c,r.a.createElement(de.a,{color:"textSecondary",variant:"subtitle2"},t),o||r.a.createElement(r.a.Fragment,null)),f?r.a.createElement(r.a.Fragment,null):r.a.createElement(ue.a,null))}var me=a(7),pe=function(e){return me.g.find((function(t){return t.id===e}))};function we(e){var t=e.owner,a=e.amount,n=e.poolId,r=e.nonce;return Object(W.keccak256)(W.defaultAbiCoder.encode(["address","address","uint","bytes32","uint"],[me.c,t,a,n,r]))}function ge(e){return(e.div(1e14).toNumber(10)/me.d).toFixed(4)}function ye(e,t){var a=(e&&e.time?e.time.toNumber():Date.now()/1e3)<1597190400&&Date.now()<15971904e5,n=6e6/t.div(Object(W.bigNumberify)("1000000000000000000")).toNumber()*(365/145),r=1e6/t.div(Object(W.bigNumberify)("1000000000000000000")).toNumber()*(365/30);return n+(a?r:0)}function he(e){var t=e.stats,a=e.onRequestUnbond,f=e.onUnbond,o=e.onClaimRewards,c=t.userBonds.filter((function(e){return"Active"===e.status})).map((function(e){return e.currentAmount})).reduce((function(e,t){return e.add(t)}),me.l),l=Object(n.useState)({}),i=Object(s.a)(l,2),u=i[0],d=i[1];Object(n.useEffect)((function(){fetch(me.h).then((function(e){return e.json()})).then(d).catch(console.error)}),[]);var b=function(e){if(!e)return null;if(!u.USD)return null;var t=e.div(1e14).toNumber(10)/me.d*u.USD;return"".concat(t.toFixed(2)," USD")},m="This table will show all your individual ADX deposits (bonds), along\n\t\twith information as status, amount and earned reward. By using the\n\t\taction buttons, you will be able to request unbonding and withdraw your\n\t\tADX after the ".concat(me.k," day lock-up period."),p=!t.loaded||t.userBonds.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(re.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(I.a,{square:!0,elevation:6,variant:"filled",severity:"info"},m)),w={fontWeight:"bold"};return r.a.createElement(re.a,{container:!0,alignItems:"stretch",style:{padding:O.spacing(4),maxWidth:"1200px",margin:"auto"},spacing:2},r.a.createElement(re.a,{item:!0,sm:12},r.a.createElement(fe.a,{mb:2},r.a.createElement(I.a,{elevation:6,variant:"filled",severity:"info"},r.a.createElement("span",null,"We have revised the rewards calculation. You can read more on"," ",r.a.createElement("a",{href:"https://www.adex.network/blog/token-upgrade-progress/"},"our blog"),".")))),r.a.createElement(re.a,{item:!0,md:3,sm:6,xs:12},function(e){var t=e.rewardChannels,a=(e.earnedADX,e.onClaimRewards,"Your total unclaimed reward"),n=null!=t;if(!n)return be({loaded:n,title:a,extra:"0.00 USD",subtitle:"0.00 DAI"});var f,o=function(e){return e.map((function(e){return e.outstandingReward})).reduce((function(e,t){return e.add(t)}),me.l)},c=o(t.filter((function(e){return e.channelArgs.tokenAddr===me.a}))),l=o(t.filter((function(e){return e.channelArgs.tokenAddr!==me.a})));return be({loaded:!0,title:a,actions:r.a.createElement(ae.a,{arrow:!0,title:"Coming soon! Rewards withdraw will be available when the ADX token migration is completed."},r.a.createElement("div",null,r.a.createElement(ne.a,{size:"small",variant:"contained",color:"secondary",disabled:!0},"claim reward"))),subtitle:l.gt(me.l)?"".concat(ge(c)," ADX, ").concat((f=l,(f.div(Object(W.bigNumberify)("10000000000000000")).toNumber(10)/100).toFixed(2))," DAI"):"".concat(ge(c)," ADX")})}({rewardChannels:t.rewardChannels,onClaimRewards:o})),r.a.createElement(re.a,{item:!0,md:3,sm:6,xs:12},be({loaded:t.loaded,title:"Total ADX staked",extra:b(t.totalStake),subtitle:ge(t.totalStake)+" ADX"})),r.a.createElement(re.a,{item:!0,md:3,sm:6,xs:12},be({loaded:t.loaded,title:"Your total active stake",extra:b(c),subtitle:ge(c)+" ADX"})),r.a.createElement(re.a,{item:!0,md:3,sm:6,xs:12},be({loaded:t.loaded,title:"Your balance",subtitle:t.userBalance?ge(t.userBalance)+" ADX":"",extra:b(t.userBalance)})),r.a.createElement(oe.a,{xs:12},r.a.createElement(ce.a,{"aria-label":"Bonds table",style:{marginTop:O.spacing(2)}},r.a.createElement(le.a,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,{style:w},"Bond amount"),r.a.createElement(te.a,{style:w,align:"right"},"Pool"),r.a.createElement(te.a,{style:w,align:"right"},"Status"),r.a.createElement(te.a,{style:w,align:"right"},"Actions"))),r.a.createElement(ie.a,null,Object(Q.a)(t.userBonds||[]).reverse().map((function(e){var n=pe(e.poolId),o=n?n.label:e.poolId;return r.a.createElement(ee.a,{key:we(e)},r.a.createElement(te.a,null,ge(e.currentAmount)," ADX"),r.a.createElement(te.a,{align:"right"},o),r.a.createElement(te.a,{align:"right"},function(e){if("UnbondRequested"===e.status){var a=e.willUnlock.getTime(),n=Date.now();if(a>n){var r=Math.ceil((a-n)/864e5);return"Can unbond in ".concat(r," days")}return"Can unbond"}return"Active"===e.status?"Active, earning ".concat((100*ye(e,t.totalStake)).toFixed(2),"% APY"):e.status}(e)),r.a.createElement(te.a,{align:"right"},r.a.createElement(ae.a,{arrow:!0,title:"Adding more ADX will be available soon."},r.a.createElement("div",null,r.a.createElement(ne.a,{disabled:!0,color:"primary"},"Add more ADX"))),"Active"===e.status?r.a.createElement(ne.a,{color:"primary",onClick:function(){return a(e)}},"Request Unbond"):r.a.createElement(ne.a,{disabled:e.willUnlock.getTime()>Date.now(),onClick:function(){return f(e)},color:"secondary"},"Unbond")))}))))),p)}var ve=a(472),xe=a(453),Ee=a(474),ke=a(466),Oe=a(454),je=a(467);function Ae(e){var t=e.maxAmount,a=e.onNewBond,f=e.totalStake,o=e.pools,l=Object(n.useState)(me.e),i=Object(s.a)(l,2),u=i[0],d=i[1],b=Object(n.useState)(0),m=Object(s.a)(b,2),p=m[0],w=m[1],g=Object(n.useState)(!1),y=Object(s.a)(g,2),h=y[0],v=y[1],x=Object(n.useState)(""),E=Object(s.a)(x,2),k=E[0],j=E[1],A=Object(n.useState)(!1),C=Object(s.a)(A,2),S=C[0],D=C[1],B=Object(n.useState)(""),T=Object(s.a)(B,2),P=T[0],U=T[1],I={minWidth:"180px"},N=pe(P),X=me.i?r.a.createElement(r.a.Fragment,null,"\xa0and"," ",r.a.createElement("a",{target:"_blank",href:me.i},"staking conditions")):r.a.createElement(r.a.Fragment,null),F=r.a.createElement(r.a.Fragment,null,"I understand I am locking up my ADX for at least ",me.k," days and I am familiar with the\xa0",r.a.createElement("a",{href:"https://www.adex.network/tos/",target:"_blank"},"Terms and conditions"),X,"."),M=function(e){var a=e.amountBN;e.poolToValidate;if(a.gt(t))return v(!0),void j("Insufficient ADX amount!");v(!1)},R=function(e){var t=e<0?0:e,a=Object(W.bigNumberify)(Math.floor(t*me.d));M({amountBN:a,poolToValidate:N}),w(t),d(Object(c.a)({},u,{amount:a}))};return r.a.createElement(se.a,{elevation:2,style:{width:"500px",padding:O.spacing(2,4,3)}},r.a.createElement("h2",null,"Create a bond"),r.a.createElement(re.a,{container:!0,spacing:2},r.a.createElement(re.a,{item:!0,xs:6},r.a.createElement(ve.a,{required:!0,label:"ADX amount",type:"number",style:I,value:p,error:h,onChange:function(e){return R(e.target.value)},helperText:h?k:null}),r.a.createElement(de.a,{variant:"subtitle2"},"Max amount:",r.a.createElement(ne.a,{onClick:function(e){R((t.toNumber()/me.d).toFixed(4))}},(t.toNumber(10)/me.d).toFixed(4)," ADX"))),r.a.createElement(re.a,{item:!0,xs:6},r.a.createElement(xe.a,{required:!0},r.a.createElement(Ee.a,null,"Pool"),r.a.createElement(ke.a,{style:I,value:P,onChange:function(e){return function(e){var t=Object(W.bigNumberify)(Math.floor(p*me.d)),a=pe(e);M({amountBN:t,poolToValidate:a}),U(e),d(Object(c.a)({},u,{poolId:e}))}(e.target.value)}},r.a.createElement(L.a,{value:""},r.a.createElement("em",null,"None")),o.map((function(e){var t=e.label,a=e.id;return r.a.createElement(L.a,{key:a,value:a},t)}))))),N?r.a.createElement(re.a,{item:!0,xs:12},r.a.createElement(re.a,{item:!0,xs:12},r.a.createElement(de.a,{variant:"h6"},"Pool reward policy:"),r.a.createElement(de.a,{variant:"body1"},N.rewardPolicy)),r.a.createElement(re.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(de.a,{variant:"h6"},"Pool slashing policy:"),r.a.createElement(de.a,{variant:"body1"},N.slashPolicy)),r.a.createElement(re.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(de.a,{variant:"h6"},"Pool APY:"),r.a.createElement(de.a,{variant:"body1"},"\ud83c\udf3e Current annual yield of"," ",(100*ye(null,f)).toFixed(2),"% \ud83c\udf3e")),r.a.createElement(re.a,{item:!0,xs:12,style:{marginTop:O.spacing(2)}},r.a.createElement(de.a,{variant:"body1"},r.a.createElement("b",null,"Please sign ALL Metamask transactions that pop up.")))):"",r.a.createElement(re.a,{item:!0,xs:12},r.a.createElement(Oe.a,{style:{userSelect:"none"},label:F,control:r.a.createElement(je.a,{checked:S,onChange:function(e){return D(e.target.checked)}})})),r.a.createElement(re.a,{item:!0,xs:12},r.a.createElement(xe.a,{style:{display:"flex"}},r.a.createElement(ne.a,{disabled:!(u.poolId&&S&&u.amount.gt(me.l)&&!h),color:"primary",variant:"contained",onClick:function(){D(!1),a(u)}},"Stake ADX")))))}var Ce=a(455),Se=a(456),De=a(457),Be=a(458);var Te=a(30),Pe="0x333420fc6a897356e69b62417cd17ff012177d2b",Ue="0x4470bb87d77b963a013db939be332f927f2b992e",Ie=Object(Y.getDefaultProvider)(),Ne=new Y.Contract(me.c,H,Ie),Xe=new Y.Contract(Ue,K,Ie),Fe=new Y.Contract(me.a,K,Ie),Me=new Y.Contract(Pe,Z,Ie),Re=Object(W.bigNumberify)("1000000000000000000"),Le={loaded:!1,userBonds:[],userBalance:me.l,totalStake:me.l};function _e(e){return r.a.createElement(I.a,Object.assign({elevation:6,variant:"filled"},e))}function qe(){var e,t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if("undefined"===typeof window.ethereum){a.next=3;break}return a.next=3,i.a.awrap(window.ethereum.enable());case 3:if(window.web3){a.next=5;break}return a.abrupt("return",null);case 5:return e=new z.Web3Provider(window.web3.currentProvider),t=e.getSigner(),a.abrupt("return",t);case 8:case"end":return a.stop()}}))}function Ye(){var e,t,a,n,r,f;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(qe());case 2:if(e=o.sent){o.next=5;break}return o.abrupt("return",{loaded:!0,userBonds:[],userBalance:me.l,rewardChannels:[]});case 5:return o.next=7,i.a.awrap(e.getAddress());case 7:return t=o.sent,o.next=10,i.a.awrap(Promise.all([We(t),ze(t)]));case 10:return a=o.sent,n=Object(s.a)(a,2),r=n[0],f=n[1],o.abrupt("return",Object(c.a)({},r,{loaded:!0,rewardChannels:f}));case 15:case"end":return o.stop()}}))}function We(e){var t,a,n,r,f,o,l,u,d;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return t=Object(Te.a)(e).addr,b.next=3,i.a.awrap(Promise.all([Promise.all([Xe.balanceOf(e).then((function(e){return e.mul(me.j)})),Xe.balanceOf(t).then((function(e){return e.mul(me.j)}))]),Ie.getLogs({fromBlock:0,address:me.c,topics:[null,Object(W.hexZeroPad)(t,32)]}),Ie.getLogs(Object(c.a)({fromBlock:0},Ne.filters.LogSlash(null,null)))]));case 3:return a=b.sent,n=Object(s.a)(a,3),r=n[0],f=n[1],o=n[2],l=r.reduce((function(e,t){return e.add(t)})),u=o.reduce((function(e,t){var a=Ne.interface.parseLog(t).values,n=a.poolId,r=a.newSlashPts;return e[n]=r,e}),{}),d=f.reduce((function(e,t){var a=t.topics[0],n=Ne.interface.events;if(a===n.LogBond.topic){var r=Ne.interface.parseLog(t).values,f=r.owner,o=r.amount,l=r.poolId,i=r.nonce,s=r.slashedAtStart,d={owner:f,amount:o,poolId:l,nonce:i,slashedAtStart:s,time:r.time};e.push(Object(c.a)({id:we(d),status:"Active",currentAmount:d.amount.mul(Re.sub(u[l]||me.l)).div(Re.sub(s))},d))}else if(a===n.LogUnbondRequested.topic){var b=Ne.interface.parseLog(t).values,m=b.bondId,p=b.willUnlock,w=e.find((function(e){return e.id===m}));w.status="UnbondRequested",w.willUnlock=new Date(1e3*p)}else if(a===n.LogUnbonded.topic){var g=Ne.interface.parseLog(t).values.bondId;e.find((function(e){return e.id===g})).status="Unbonded"}return e}),[]),b.abrupt("return",{userBonds:d,userBalance:l});case 12:case"end":return b.stop()}}))}function ze(e){var t,a,n,r,f,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(Te.a)(e).addr,a=me.g[0],l.next=4,i.a.awrap(fetch("".concat(a.url,"/fee-rewards")));case 4:return n=l.sent,l.next=7,i.a.awrap(n.json());case 7:return r=l.sent,f=Math.floor(Date.now()/1e3),l.next=11,i.a.awrap(Promise.all(r.map((function(a){var n,r,o;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(!(a.channelArgs.validUntil<f)){l.next=2;break}return l.abrupt("return",null);case 2:if(n=a.balances[e]?e:t,a.balances[n]){l.next=5;break}return l.abrupt("return",null);case 5:return r=new J.a(a.balances),l.t0=Object(W.bigNumberify)(a.balances[n]),l.next=9,i.a.awrap(Me.withdrawnPerUser(a.channelId,n));case 9:if(l.t1=l.sent,!(o=l.t0.sub.call(l.t0,l.t1)).eq(me.l)){l.next=13;break}return l.abrupt("return",null);case 13:return l.abrupt("return",Object(c.a)({},a,{outstandingReward:o,claimFrom:n,proof:r.getProof(n),stateRoot:r.mTree.getRoot(),amount:a.balances[n]}));case 14:case"end":return l.stop()}}))}))));case 11:return o=l.sent,l.abrupt("return",o.filter((function(e){return e})));case 13:case"end":return l.stop()}}))}function Ve(e,t){var a,n,r,f,o,c,l,u,d,b,m,p,w,g,y,h,v,x,E,k,O;return i.a.async((function(j){for(;;)switch(j.prev=j.next){case 0:if(a=t.amount,n=t.poolId,r=t.nonce,n){j.next=3;break}return j.abrupt("return");case 3:if(e.userBalance){j.next=5;break}return j.abrupt("return");case 5:if(!a.gt(e.userBalance.div(me.j))){j.next=7;break}throw new Error("amount too large");case 7:return j.next=9,i.a.awrap(qe());case 9:if(f=j.sent){j.next=12;break}throw new Error("failed to get signer");case 12:return j.next=14,i.a.awrap(f.getAddress());case 14:return o=j.sent,c=Object(Te.a)(o),l=c.addr,u=c.bytecode,d=[a.mul(me.j),n,r||Object(W.bigNumberify)(Math.floor(Date.now()/1e3))],b=new Y.Contract(l,G,f),m=new Y.Contract(Ue,K,f),p=new Y.Contract(me.b,$,f),w=[],j.next=23,i.a.awrap(Xe.balanceOf(b.address));case 23:return g=j.sent,y=a.sub(g),j.next=27,i.a.awrap(Ie.getCode(b.address));case 27:if(j.t0=j.sent,"0x"===j.t0){j.next=62;break}return console.log("Contract exists: "+b.address),h=[],j.next=33,i.a.awrap(Promise.all([b.nonce(),m.allowance(o,b.address)]));case 33:if(v=j.sent,x=Object(s.a)(v,2),E=x[0],(k=x[1]).gt(a)){j.next=49;break}if(!k.gt(me.l)){j.next=44;break}return j.t1=w,j.next=42,i.a.awrap(m.approve(b.address,me.l,{gasLimit:8e4}));case 42:j.t2=j.sent,j.t1.push.call(j.t1,j.t2);case 44:return j.t3=w,j.next=47,i.a.awrap(m.approve(b.address,me.f,{gasLimit:8e4}));case 47:j.t4=j.sent,j.t3.push.call(j.t3,j.t4);case 49:return y.gt(me.l)&&h.push(Object(Te.b)(b.address,E,Xe.address,Xe.interface.functions.transferFrom.encode([o,b.address,a]))),h.push(Object(Te.b)(b.address,E.add(h.length),Xe.address,Xe.interface.functions.approve.encode([Fe.address,a]))),O=new W.Interface(["function swap(uint prevTokenAmount) external"]),h.push(Object(Te.b)(b.address,E.add(h.length),Fe.address,O.functions.swap.encode([a]))),h.push(Object(Te.b)(b.address,E.add(h.length),Fe.address,Fe.interface.functions.approve.encode([Ne.address,d[0]]))),h.push(Object(Te.b)(b.address,E.add(h.length),Ne.address,Ne.interface.functions.addBond.encode([d]))),j.t5=w,j.next=58,i.a.awrap(b.executeBySender(h.map((function(e){return e.toSolidityTuple()})),{gasLimit:31e4}));case 58:j.t6=j.sent,j.t5.push.call(j.t5,j.t6),j.next=74;break;case 62:if(console.log("Contract does not exist: "+b.address),!y.gt(me.l)){j.next=69;break}return j.t7=w,j.next=67,i.a.awrap(m.transfer(b.address,y,{gasLimit:8e4}));case 67:j.t8=j.sent,j.t7.push.call(j.t7,j.t8);case 69:return j.t9=w,j.next=72,i.a.awrap(p.deploy(u,0,{gasLimit:45e4}));case 72:j.t10=j.sent,j.t9.push.call(j.t9,j.t10);case 74:return j.next=76,i.a.awrap(Promise.all(w.map((function(e){return e.wait()}))));case 76:case"end":return j.stop()}}))}function Je(e,t){var a,n,r,f,o,c,l,s,u,d,b,m,p,w,g;return i.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:return a=t.amount,n=t.poolId,r=t.nonce,y.next=3,i.a.awrap(qe());case 3:if(f=y.sent){y.next=6;break}throw new Error("failed to get signer");case 6:return y.next=8,i.a.awrap(f.getAddress());case 8:return o=y.sent,c=Object(Te.a)(o),l=c.addr,s=c.bytecode,u=new Y.Contract(l,G,f),y.next=13,i.a.awrap(Ie.getCode(u.address));case 13:if(y.t0=y.sent,"0x"===y.t0){y.next=20;break}return y.next=17,i.a.awrap(u.nonce());case 17:d=y.sent,y.next=25;break;case 20:return d=me.l,m=new Y.Contract(me.b,$,f),y.next=24,i.a.awrap(m.deploy(s,0,{gasLimit:4e5}));case 24:b=e?14e4:7e4;case 25:return p=[a,n,r||me.l],w=[],e?(w.push(Object(Te.b)(u.address,d,Ne.address,Ne.interface.functions.unbond.encode([p]))),w.push(Object(Te.b)(u.address,d.add(1),Fe.address,Fe.interface.functions.transfer.encode([o,a])))):w.push(Object(Te.b)(u.address,d,Ne.address,Ne.interface.functions.requestUnbond.encode([p]))),y.next=30,i.a.awrap(u.executeBySender(w.map((function(e){return e.toSolidityTuple()})),{gasLimit:b}));case 30:return g=y.sent,y.next=33,i.a.awrap(g.wait());case 33:case"end":return y.stop()}}))}function He(e){var t,a,n,r,f,o,c,l,s,u,d;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,i.a.awrap(qe());case 2:if(t=b.sent){b.next=5;break}throw new Error("failed to get signer");case 5:a=new Y.Contract(Pe,Z,t),n=[],r=!0,f=!1,o=void 0,b.prev=10,c=e[Symbol.iterator]();case 12:if(r=(l=c.next()).done){b.next=24;break}return s=l.value,u=s.channelArgs,d=[u.creator,u.tokenAddr,u.tokenAmount,u.validUntil,u.validators,u.spec],b.t0=n,b.next=19,i.a.awrap(a.channelWithdraw(d,s.stateRoot,s.signatures,s.proof,s.amount));case 19:b.t1=b.sent,b.t0.push.call(b.t0,b.t1);case 21:r=!0,b.next=12;break;case 24:b.next=30;break;case 26:b.prev=26,b.t2=b.catch(10),f=!0,o=b.t2;case 30:b.prev=30,b.prev=31,r||null==c.return||c.return();case 33:if(b.prev=33,!f){b.next=36;break}throw o;case 36:return b.finish(33);case 37:return b.finish(30);case 38:return b.abrupt("return",Promise.all(n.map((function(e){return e.wait()}))));case 39:case"end":return b.stop()}}),null,null,[[10,26,30,38],[31,,33,37]])}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],f=t[1],o=r.a.useState(null),l=Object(s.a)(o,2),d=l[0],b=l[1],m=Object(n.useState)(!1),p=Object(s.a)(m,2),w=p[0],g=p[1],y=Object(n.useState)("Error! Unspecified error occured."),h=Object(s.a)(y,2),v=h[0],x=h[1],E=Object(n.useState)(Le),k=Object(s.a)(E,2),B=k[0],I=k[1],F=function(){return function(){var e,t,a,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(Promise.all([Fe.balanceOf(me.c),Ye()]));case 2:return e=r.sent,t=Object(s.a)(e,2),a=t[0],n=t[1],r.abrupt("return",Object(c.a)({totalStake:a},n));case 7:case"end":return r.stop()}}))}().then(I).catch((function(e){console.error("loadStats",e),g(!0),4001===e.code&&x("Error! User denied authorization!")}))};Object(n.useEffect)((function(){F();var e=setInterval(F,2e4);return function(){return clearInterval(e)}}),[]);var _=function(e){return function(){var t,a,n,r=arguments;return i.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:for(f.prev=0,t=r.length,a=new Array(t),n=0;n<t;n++)a[n]=r[n];return f.next=4,i.a.awrap(e.apply(null,a));case 4:f.next=11;break;case 6:f.prev=6,f.t0=f.catch(0),console.error(f.t0),g(!0),x(f.t0.message||"Unknown error");case 11:case"end":return f.stop()}}),null,null,[[0,6]])}},Y=_(Je.bind(null,!1)),W=_(Je.bind(null,!0)),z=function(e,t){"clickaway"!==t&&g(!1)},V=_(He);return r.a.createElement(u.a,{theme:O},r.a.createElement(j.a,{position:"static"},r.a.createElement(A.a,null,r.a.createElement("img",{height:"40vh",src:q.a,alt:"logo"}),r.a.createElement(D.a,{disabled:!B.loaded,onClick:function(){return f(!0)},variant:"extended",color:"secondary",style:{position:"absolute",right:"5%",top:"50%"}},r.a.createElement(T.a,{style:{margin:O.spacing(1)}}),"Stake your ADX"),function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],f=t[1],o=function(){f(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{style:{position:"absolute",right:"1.25%",top:"10%"},onClick:function(e){f(e.currentTarget)}},r.a.createElement(M.a,{style:{fontSize:"1.5em",color:"white"}})),r.a.createElement(X.a,{id:"simple-menu",anchorEl:a,open:Boolean(a),keepMounted:!0,onClose:o,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(R.a,{href:"https://www.adex.network/tos",target:"_blank"},r.a.createElement(L.a,{onClick:o},"Terms of Service")),r.a.createElement(R.a,{href:"https://www.adex.network/blog/adx-staking-is-here/",target:"_blank"},r.a.createElement(L.a,{onClick:o},"User Guide")),r.a.createElement(R.a,{href:"https://github.com/adexnetwork/adex-protocol-eth",target:"_blank"},r.a.createElement(L.a,{onClick:o},"Source Code")),r.a.createElement(R.a,{href:"https://coinmarketcap.com/currencies/adx-net/markets/",target:"_blank"},r.a.createElement(L.a,{onClick:o},"Where to buy ADX"))))}())),he({stats:B,onRequestUnbond:b,onUnbond:W,onClaimRewards:V}),function(e){var t=e.toUnbond,a=e.onDeny,n=e.onConfirm;return r.a.createElement(Ce.a,{open:!!t,onClose:a},r.a.createElement(Se.a,{id:"alert-dialog-title"},"Are you sure?"),r.a.createElement(De.a,null,"Are you sure you want to request unbonding of"," ",ge(t?t.currentAmount:me.l)," ADX?",r.a.createElement("br",null),r.a.createElement("br",null),"Please be aware:",r.a.createElement("ol",null,r.a.createElement("li",null,"It will take ",me.k," days before you will be able to withdraw your ADX!"),r.a.createElement("li",null,"You will not receive staking rewards for this amount in this"," ",me.k," day period."))),r.a.createElement(Be.a,null,r.a.createElement(ne.a,{onClick:a,autoFocus:!0,color:"primary"},"Cancel"),r.a.createElement(ne.a,{onClick:n,color:"primary"},"Unbond")))}({toUnbond:d,onDeny:function(){return b(null)},onConfirm:function(){d&&Y(d),b(null)}}),r.a.createElement(U.a,{open:w,autoHideDuration:6e3,onClose:z},r.a.createElement(_e,{onClose:z,severity:"error"},v)),r.a.createElement(C.a,{open:a,onClose:function(){return f(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center"},closeAfterTransition:!0,BackdropComponent:S.a,BackdropProps:{timeout:300}},r.a.createElement(P.a,{in:a},Ae({pools:me.g.filter((function(e){return e.selectable})),totalStake:B.totalStake,maxAmount:B.userBalance.div(me.j),onNewBond:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!1),t.next=3,i.a.awrap(_(Ve.bind(null,B,e))());case 3:case"end":return t.stop()}}))}}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"l",(function(){return f})),a.d(t,"h",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"k",(function(){return l})),a.d(t,"i",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return b})),a.d(t,"g",(function(){return m})),a.d(t,"j",(function(){return p}));var n=a(20),r="0x4846c6837ec670bbd1f5b485471c8f64ecb9c534",f=Object(n.bigNumberify)(0),o="https://min-api.cryptocompare.com/data/price?fsym=ADX&tsyms=BTC,USD,EUR",c=1e4,l=30,i=null,s="0xADE00C28244d5CE17D72E40330B1c318cD12B7c3",u="0x9fe0d438e3c29c7cff949ad8e8da9403a531cc1a",d=Object(n.bigNumberify)("115792089237316195423570985008687907853269984665640564039457584007913129639935"),b={poolId:"",amount:f},m=[{label:"Validator Tom",id:Object(n.id)("validator:0x2892f6C41E0718eeeDd49D98D648C789668cA67d"),selectable:!0,minStakingAmount:0,rewardPolicy:'The "Validator Tom" pool will distribute its fee earnings proportionally to each staker. The fee earnings will be 7% of the total volume, which you can track on our Explorer. There is an additional incentive reward of 7 million ADX to be distributed by the end of 2020.',slashPolicy:"No slashing.",url:"https://tom.adex.network",estimatedAnnualFeeYield:182500,estimatedAnnualADXYield:15103448.2758,estimatedAnnualADXEarlyYield:12166666.6666},{label:"Validator Jerry",id:Object(n.id)("validator:0xce07CbB7e054514D590a0262C93070D838bFBA2e"),selectable:!1,minStakingAmount:0,rewardPolicy:"",slashPolicy:""}],p=Object(n.bigNumberify)("100000000000000")}},[[244,1,2]]]);
//# sourceMappingURL=main.7c4e5d38.chunk.js.map